#pragma once
#include<dinput.h>
#include<wrl.h>
#include "myMath.h"
#include"WindowsApp.h"

enum MouseButton
{
	LEFT,
	RIGHT,
	CENTER
};

class Mouse
{
private:

	WindowsApp* windowsApp = nullptr;

	Microsoft::WRL::ComPtr<IDirectInputDevice8> mouse = nullptr;
	DIMOUSESTATE2 mouseState = {};
	DIMOUSESTATE2 oldMouseState = {};
	//マウスの座標
	myMath::Vector2 mousePos;

public:

	//初期化処理(普段使わない)
	void Initialize(IDirectInput8* directInput);
	//更新処理(普段使わない)
	void Update();

	/// <summary>
	/// buttonで指定したボタンを押した瞬間
	/// </summary>
	/// <param name="button">LEFT,RIGHT,CENTERのどれか</param>
	/// <returns></returns>
	bool TriggerPush(MouseButton button);

	/// <summary>
	/// buttonで指定したボタンを押している間
	/// </summary>
	/// <param name="button">LEFT,RIGHT,CENTERのどれか</param>
	/// <returns></returns>
	bool KeepPush(MouseButton button);

	/// <summary>
	/// buttonで指定したボタンを離した瞬間
	/// </summary>
	/// <param name="button">LEFT,RIGHT,CENTERのどれか</param>
	/// <returns></returns>
	bool TriggerRelease(MouseButton button);

	/// <summary>
	/// buttonで指定したボタンを押していない間
	/// </summary>
	/// <param name="button">LEFT,RIGHT,CENTERのどれか</param>
	/// <returns></returns>
	bool KeepRelease(MouseButton button);

	//マウスの座標取得
	myMath::Vector2 GetmousePos();

	//シングルトン
	static Mouse* GetInstance();

private:

	Mouse() = default;
	~Mouse() = default;

	//コピーコンストラクタ・代入演算子削除
	Mouse& operator=(const Mouse&) = delete;
	Mouse(const Mouse&) = delete;
};